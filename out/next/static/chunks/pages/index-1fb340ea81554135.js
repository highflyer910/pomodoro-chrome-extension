(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(5599)}])},5599:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var s=o(5893),r=o(7294),l=o(9008),n=o.n(l),a=o(2034),i=o.n(a);function c(e){let{workTime:t,shortBreakTime:o,longBreakTime:l,handleWorkTimeChange:n,handleShortBreakTimeChange:a,handleLongBreakTimeChange:c,saveSettings:u}=e,[m,d]=(0,r.useState)(""),[h,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{chrome.storage.local.get("urlList",e=>{e.urlList&&_(e.urlList)})},[]);let g=e=>d(e.target.value),f=()=>{if(m){let e=m.split(".")[1],t=[...h,e];_(t),d(""),chrome.storage.local.set({urlList:t})}},x=e=>{let t=h.filter((t,o)=>o!==e);_(t),chrome.storage.local.set({urlList:t})},j=()=>{chrome.storage.local.set({workTime:t,shortBreakTime:o,longBreakTime:l},()=>{console.log("Settings saved")}),u()};return(0,s.jsxs)("div",{className:i().settings,children:[(0,s.jsxs)("label",{className:i().label,children:["Work Time:",(0,s.jsx)("input",{type:"number",value:t,onChange:n})]}),(0,s.jsxs)("label",{className:i().label,children:["Short Break:",(0,s.jsx)("input",{type:"number",value:o,onChange:a})]}),(0,s.jsxs)("label",{className:i().label,children:["Long Break:",(0,s.jsx)("input",{type:"number",value:l,onChange:c})]}),(0,s.jsxs)("label",{className:i().label,children:["URL:",(0,s.jsx)("input",{type:"url",value:m,onChange:g}),(0,s.jsx)("button",{className:i().controlButton,onClick:f,children:"Add URL"})]}),(0,s.jsxs)("div",{className:i().urlList,children:[(0,s.jsx)("h3",{children:"Stored URLs:"}),(0,s.jsx)("ul",{children:h.map((e,t)=>(0,s.jsxs)("li",{className:i().li,children:[e,(0,s.jsx)("button",{className:i().deleteButton,onClick:()=>x(t),children:"Delete"})]},t))})]}),(0,s.jsx)("button",{className:i().controlButton,onClick:j,children:"Save"})]})}function u(){let[e,t]=(0,r.useState)(25),[o,l]=(0,r.useState)(0),[n,a]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),[_,g]=(0,r.useState)(25),[f,x]=(0,r.useState)(5),[j,v]=(0,r.useState)(15),[S,p]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{chrome.storage.local.get(["timerEnd","timerState"],function(e){if(e.timerState){let{isBreak:t,sessions:o,workTime:s,shortBreakTime:r,longBreakTime:l,isBlocked:n}=e.timerState;m(t),h(o),g(s),x(r),v(l),N(n)}if(e.timerEnd){let o=Math.max((e.timerEnd-Date.now())/1e3,0);t(Math.floor(o/60)),l(Math.floor(o%60)),a(o>0)}})},[]),(0,r.useEffect)(()=>{let e=null;return n?e=setInterval(()=>{B()},1e3):clearInterval(e),()=>clearInterval(e)},[n,o,e]),(0,r.useEffect)(()=>{n||E()},[_,f,j,u]),(0,r.useEffect)(()=>{k()},[b]);let k=()=>{let e={isBreak:u,sessions:d,workTime:_,shortBreakTime:f,longBreakTime:j,isBlocked:b};console.log("I am saving timer",e),chrome.storage.local.set({timerState:e})},B=()=>{0===o?0===e?P():(t(e-1),l(59)):l(o-1),k()},P=()=>{if(u)m(!1),E(),h(d+1);else{let e=d+1===4?60*j:60*f;t(Math.floor(e/60)),l(e%60),m(!0),C(e,!0)}k()},E=()=>{t(u?f:_),l(0),m(!1),k()},C=(e,t)=>{n||(a(!0),N(!0),chrome.runtime.sendMessage({type:"startAlarm",duration:e,isBreak:t})),t&&N(!1),k()},L=()=>{n?(a(!1),N(!1),console.log("isblocked",b),k(),chrome.runtime.sendMessage({type:"clearAlarm"})):C(60*e+o,u)},T=()=>{a(!1),E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),N(!1),k()};return(0,s.jsx)("div",{className:i().pomodoro,children:S?(0,s.jsx)(c,{workTime:_,shortBreakTime:f,longBreakTime:j,handleWorkTimeChange:e=>g(Number(e.target.value)),handleShortBreakTimeChange:e=>x(Number(e.target.value)),handleLongBreakTimeChange:e=>v(Number(e.target.value)),saveSettings:()=>{E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),N(!1),a(!1),k(),p(!1)}}):(0,s.jsxs)("div",{className:i().timerScreen,children:[(0,s.jsx)("h1",{children:u?"Break Time":"Work Time"}),(0,s.jsxs)("div",{className:i().timer,children:[e,":",o<10?"0".concat(o):o]}),(0,s.jsxs)("div",{className:i().controls,children:[(0,s.jsx)("button",{className:i().controlButton,onClick:L,children:n?"Pause":"Start"}),(0,s.jsx)("button",{className:i().controlButton,onClick:T,children:"Reset"})]}),(0,s.jsxs)("p",{children:["Session ",d+1,"/4"]}),(0,s.jsx)("button",{className:i().settingsButton,onClick:()=>p(!0),children:"Settings"})]})})}function m(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"Pomodoro App"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,s.jsx)("main",{children:(0,s.jsx)(u,{})})]})}},2034:function(e){e.exports={pomodoro:"Pomodoro_pomodoro__JuzqD",timerScreen:"Pomodoro_timerScreen__RKHyg",timer:"Pomodoro_timer__QP_Qy",timerButton:"Pomodoro_timerButton__evvj7",controls:"Pomodoro_controls__FMFEZ",controlButton:"Pomodoro_controlButton__P__bZ",settingsButton:"Pomodoro_settingsButton__DBFLQ",deleteButton:"Pomodoro_deleteButton__nDvqH",urlList:"Pomodoro_urlList__V4VY9",settings:"Pomodoro_settings__AOn5S",label:"Pomodoro_label__svMrm"}},9008:function(e,t,o){e.exports=o(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);