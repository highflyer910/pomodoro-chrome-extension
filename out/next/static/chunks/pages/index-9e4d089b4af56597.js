(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(5599)}])},5599:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var s=o(5893),n=o(7294),r=o(9008),l=o.n(r),a=o(2034),i=o.n(a);function c(e){let{workTime:t,shortBreakTime:o,longBreakTime:r,handleWorkTimeChange:l,handleShortBreakTimeChange:a,handleLongBreakTimeChange:c,saveSettings:u}=e,[m,d]=(0,n.useState)(""),[h,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{chrome.storage.local.get("urlList",e=>{e.urlList&&g(e.urlList)})},[]);let _=e=>d(e.target.value),x=()=>{if(m){let e=m.split(".")[1],t=[...h,e];g(t),d(""),chrome.storage.local.set({urlList:t})}},f=e=>{let t=h.filter((t,o)=>o!==e);g(t),chrome.storage.local.set({urlList:t})},j=()=>{chrome.storage.local.set({workTime:t,shortBreakTime:o,longBreakTime:r},()=>{console.log("Settings saved")}),u()};return(0,s.jsxs)("div",{className:i().settings,children:[(0,s.jsxs)("label",{className:i().label,children:["Work Time:",(0,s.jsx)("input",{type:"number",value:t,onChange:l})]}),(0,s.jsxs)("label",{className:i().label,children:["Short Break:",(0,s.jsx)("input",{type:"number",value:o,onChange:a})]}),(0,s.jsxs)("label",{className:i().label,children:["Long Break:",(0,s.jsx)("input",{type:"number",value:r,onChange:c})]}),(0,s.jsxs)("label",{className:i().label,children:["URL:",(0,s.jsx)("input",{type:"url",value:m,onChange:_}),(0,s.jsx)("button",{className:i().controlButton,onClick:x,children:"Add URL"})]}),(0,s.jsxs)("div",{className:i().urlList,children:[(0,s.jsx)("h3",{children:"Stored URLs:"}),(0,s.jsx)("ul",{children:h.map((e,t)=>(0,s.jsxs)("li",{children:[e,(0,s.jsx)("button",{className:i().deleteButton,onClick:()=>f(t),children:"Delete"})]},t))})]}),(0,s.jsx)("button",{className:i().controlButton,onClick:j,children:"Save"})]})}function u(){let[e,t]=(0,n.useState)(25),[o,r]=(0,n.useState)(0),[l,a]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[d,h]=(0,n.useState)(0),[g,_]=(0,n.useState)(25),[x,f]=(0,n.useState)(5),[j,v]=(0,n.useState)(15),[b,S]=(0,n.useState)(!1),[p,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{chrome.storage.local.get(["timerEnd","timerState"],function(e){if(e.timerState){let{isBreak:t,sessions:o,workTime:s,shortBreakTime:n,longBreakTime:r,isBlocked:l}=e.timerState;m(t),h(o),_(s),f(n),v(r),N(l)}if(e.timerEnd){let o=Math.max((e.timerEnd-Date.now())/1e3,0);t(Math.floor(o/60)),r(Math.floor(o%60)),a(o>0)}})},[]),(0,n.useEffect)(()=>{let e=null;return l?e=setInterval(()=>{B()},1e3):clearInterval(e),()=>clearInterval(e)},[l,o,e]),(0,n.useEffect)(()=>{l||E()},[g,x,j,u]),(0,n.useEffect)(()=>{k()},[p]);let k=()=>{let e={isBreak:u,sessions:d,workTime:g,shortBreakTime:x,longBreakTime:j,isBlocked:p};console.log("I am saving timer",e),chrome.storage.local.set({timerState:e})},B=()=>{0===o?0===e?C():(t(e-1),r(59)):r(o-1),k()},C=()=>{if(u)m(!1),E(),h(d+1);else{let e=d+1===4?60*j:60*x;t(Math.floor(e/60)),r(e%60),m(!0),P(e,!0)}k()},E=()=>{t(u?x:g),r(0),m(!1),k()},P=(e,t)=>{l||(a(!0),N(!0),chrome.runtime.sendMessage({type:"startAlarm",duration:e,isBreak:t})),t&&N(!1),k()},L=()=>{l?(a(!1),N(!1),console.log("isblocked",p),k(),chrome.runtime.sendMessage({type:"clearAlarm"})):P(60*e+o,u)},T=()=>{a(!1),E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),N(!1),k()},y=()=>t(e+1),M=()=>{e>0&&t(e-1)};return(0,s.jsx)("div",{className:i().pomodoro,children:b?(0,s.jsx)(c,{workTime:g,shortBreakTime:x,longBreakTime:j,handleWorkTimeChange:e=>_(Number(e.target.value)),handleShortBreakTimeChange:e=>f(Number(e.target.value)),handleLongBreakTimeChange:e=>v(Number(e.target.value)),saveSettings:()=>{E(),h(0),chrome.runtime.sendMessage({type:"clearAlarm"}),chrome.storage.local.remove("timerEnd"),N(!1),a(!1),k(),S(!1)}}):(0,s.jsxs)("div",{className:i().timerScreen,children:[(0,s.jsx)("h1",{children:u?"Break Time":"Work Time"}),(0,s.jsxs)("div",{className:i().timer,children:[(0,s.jsx)("button",{className:i().timerButton,onClick:M,children:"-"}),e,":",o<10?"0".concat(o):o,(0,s.jsx)("button",{className:i().timerButton,onClick:y,children:"+"})]}),(0,s.jsxs)("div",{className:i().controls,children:[(0,s.jsx)("button",{className:i().controlButton,onClick:L,children:l?"Pause":"Start"}),(0,s.jsx)("button",{className:i().controlButton,onClick:T,children:"Reset"})]}),(0,s.jsxs)("p",{children:["Session ",d+1,"/4"]}),(0,s.jsx)("button",{className:i().settingsButton,onClick:()=>S(!0),children:"Settings"})]})})}function m(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Pomodoro App"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,s.jsx)("main",{children:(0,s.jsx)(u,{})})]})}},2034:function(e){e.exports={pomodoro:"Pomodoro_pomodoro__JuzqD",timerScreen:"Pomodoro_timerScreen__RKHyg",timer:"Pomodoro_timer__QP_Qy",timerButton:"Pomodoro_timerButton__evvj7",controls:"Pomodoro_controls__FMFEZ",controlButton:"Pomodoro_controlButton__P__bZ",settingsButton:"Pomodoro_settingsButton__DBFLQ",settings:"Pomodoro_settings__AOn5S",label:"Pomodoro_label__svMrm"}},9008:function(e,t,o){e.exports=o(2636)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);